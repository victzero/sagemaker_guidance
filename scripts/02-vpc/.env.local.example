# =============================================================================
# 02-vpc - VPC 模块特有配置
# =============================================================================
# 共享配置请编辑: ../scripts/.env.shared
# 此文件包含 VPC 模块特有的配置项
#
# 使用方法:
#   1. 复制此文件: cp .env.local.example .env.local
#   2. 编辑 .env.local 填入实际值
#   3. 运行 ./setup-all.sh
# =============================================================================

# -----------------------------------------------------------------------------
# VPC 配置（必填）
# -----------------------------------------------------------------------------

# VPC ID（从 AWS 控制台或 CLI 获取）
# 查询命令: aws ec2 describe-vpcs --query 'Vpcs[].{ID:VpcId,CIDR:CidrBlock}' --output table
VPC_ID=vpc-xxxxxxxxxxxxxxxxx

# VPC CIDR 范围（用于安全组入站规则）
# 示例: 10.0.0.0/16, 172.16.0.0/12
VPC_CIDR=10.0.0.0/16

# 私有子网 ID（至少 2 个，用于高可用，需在不同可用区）
# 查询命令: aws ec2 describe-subnets --filters "Name=vpc-id,Values=vpc-xxx" \
#           --query 'Subnets[].{ID:SubnetId,AZ:AvailabilityZone,CIDR:CidrBlock}' --output table
PRIVATE_SUBNET_1_ID=subnet-xxxxxxxxxxxxxxxxx
PRIVATE_SUBNET_2_ID=subnet-yyyyyyyyyyyyyyyyy

# -----------------------------------------------------------------------------
# S3 Gateway Endpoint 路由表配置（必填）
# -----------------------------------------------------------------------------
# S3 Gateway Endpoint 通过路由表路由流量（非 ENI）
# 需要将 Endpoint 关联到私有子网的路由表
#
# 查询命令: aws ec2 describe-route-tables --filters "Name=vpc-id,Values=vpc-xxx" \
#           --query 'RouteTables[].{ID:RouteTableId,Associations:Associations[].SubnetId}' --output table

# 路由表 1（关联到 PRIVATE_SUBNET_1 的路由表）
ROUTE_TABLE_1_ID=rtb-xxxxxxxxxxxxxxxxx

# 路由表 2（可选，如果两个子网使用不同路由表）
# 留空则只关联 ROUTE_TABLE_1
# ROUTE_TABLE_2_ID=rtb-yyyyyyyyyyyyyyyyy

# -----------------------------------------------------------------------------
# 可选 VPC Endpoints（默认关闭）
# -----------------------------------------------------------------------------
# 设置为 true 可创建额外的 VPC Endpoints
# 每个 Interface Endpoint 约 $7.2/月

# ECR Endpoints（用于拉取自定义容器镜像）
# 包含: ecr.api + ecr.dkr 两个 Endpoints
# 场景: 使用自定义 Docker 镜像训练/推理
CREATE_ECR_ENDPOINTS=false

# KMS Endpoint（用于 KMS 加密）
# 场景: 使用 KMS CMK 加密 S3/EBS 数据
CREATE_KMS_ENDPOINT=false

# SSM Endpoint（用于 Systems Manager）
# 场景: 使用 SSM Parameter Store 存储配置
CREATE_SSM_ENDPOINT=false

# -----------------------------------------------------------------------------
# 资源标签配置（可选）
# -----------------------------------------------------------------------------
# TAG_PREFIX 用于资源命名和 ManagedBy 标签
# 默认值: ${COMPANY}-sagemaker（从 .env.shared 读取 COMPANY）
#
# 资源命名示例（假设 TAG_PREFIX=acme-sagemaker）:
#   - 安全组: sg-acme-sagemaker-studio, sg-acme-sagemaker-vpc-endpoints
#   - Endpoints: vpce-acme-sagemaker-s3, vpce-acme-sagemaker-sts
#
# 可覆盖默认值:
# TAG_PREFIX=mycompany-sagemaker

# =============================================================================
# 环境变量参考
# =============================================================================
#
# 【必填变量】
# ┌─────────────────────┬──────────────────────────────────────────────────┐
# │ 变量                │ 说明                                             │
# ├─────────────────────┼──────────────────────────────────────────────────┤
# │ VPC_ID              │ 现有 VPC ID                                      │
# │ VPC_CIDR            │ VPC CIDR 范围（用于安全组规则）                  │
# │ PRIVATE_SUBNET_1_ID │ 私有子网 1（AZ-a）                               │
# │ PRIVATE_SUBNET_2_ID │ 私有子网 2（AZ-b）                               │
# │ ROUTE_TABLE_1_ID    │ S3 Gateway Endpoint 关联的路由表                 │
# └─────────────────────┴──────────────────────────────────────────────────┘
#
# 【可选变量】
# ┌─────────────────────────┬─────────┬────────────────────────────────────┐
# │ 变量                    │ 默认值  │ 说明                               │
# ├─────────────────────────┼─────────┼────────────────────────────────────┤
# │ ROUTE_TABLE_2_ID        │ (空)    │ 第二个路由表（如子网用不同路由表） │
# │ CREATE_ECR_ENDPOINTS    │ false   │ 是否创建 ECR Endpoints             │
# │ CREATE_KMS_ENDPOINT     │ false   │ 是否创建 KMS Endpoint              │
# │ CREATE_SSM_ENDPOINT     │ false   │ 是否创建 SSM Endpoint              │
# │ TAG_PREFIX              │ (自动)  │ 资源标签前缀                       │
# └─────────────────────────┴─────────┴────────────────────────────────────┘
#
# 【从 .env.shared 继承的变量】
#   - COMPANY: 公司前缀（用于默认 TAG_PREFIX）
#   - AWS_REGION: AWS 区域
#   - AWS_ACCOUNT_ID: AWS 账号 ID
#   - OUTPUT_DIR: 输出目录
#
# =============================================================================
